\chapter{相关工作 }\label{chap:related_work}
% 2.1边缘计算技术，多终端，协同，服务
%     2.2docker容器技术/容器集群技术
%     2.3自组织网络技术——对应研究点1
%     2.4启发式调度算法——对应研究点2  可能会换成任务调度算法
%     2.5计算迁移——对应研究点3
%     2.6预测算法——对应研究点4
\section{云计算技术}
\subsection{云计算技术}
\subsection{边缘计算技术}


\section{虚拟化技术}
资源管理问题是协同服务技术中的一个重要的问题\citep{文雨2013面向应用服务级目标的虚拟化资源管理}。虚拟化技术是一种资源管理技术，利用底层虚拟、上层隔离等方法，将计算机中的物理资源，如计算、存储和网络等，进行抽象、切割，以更好的形式提供给用户使用\cite{goth2007virtualization}。虚拟化技术将计算机上原有的固定配额的物理资源按照用户需要很方便地进行分配、提取和利用，可以提高计算机和终端资源的利用率。1959年，克里斯托弗（Christopher Strachey）在他的学术报告《大型高速计算机中的时间共享》中提出了虚拟化的基本概念，成为了虚拟化技术的开端\citep{本刊编辑部2017虚拟化概述}。在IBM公司、HP公司、VMWare公司等企业的不断努力下，经过了60年的发展和成熟，虚拟化技术逐渐成为云计算与边缘计算中非常重要的一种资源管理技术\cite{pearce2013virtualization,kumar2014review}。用户根据自己的需求来租赁云计算或边缘计算的服务提供商所提供的对应资源配额的虚拟机，直接在虚拟化的操作系统中运行用户自己的应用而不需要考虑操作系统底层是如何实现的，就如同运行在一个真实而独立的实体物理机一样，非常透明\cite{叶蔚2019基于虚拟化的}。而虚拟化技术则被用来实现虚拟机的生命周期管理，包括创建、配置、关闭、监控、释放资源等等，维持这种对用户的透明性。应用了虚拟化技术的云计算模型如图\ref{fig:cloud_computation_virtualization}所示\citep{陈思锦2015云计算中的虚拟化技术与虚拟化安全}。
\begin{figure}[!htbp]
    \centering
    \includegraphics[width=1.0\textwidth]{Cloud_Computation_Virtualization_Temp}
    \caption{应用了虚拟化技术的云计算模型}
    \label{fig:cloud_computation_virtualization}
\end{figure}

\subsection{完全虚拟化技术}

完全虚拟化技术（Full Virtualization Technology）通过在宿主机操作系统（Host Operation System，简称为Host OS）上面架设一层虚拟机监控器（Virtual Machine Monitor，简称为VMM）\citep{li2017performance}来实现对硬件的虚拟化，完全虚拟化技术中的虚拟机监控器，通常为超级监控器，即Hypervisor或者Supervisor\citep{kolhe2012comparative}\citep{leite2012performance}。VMM在虚拟硬件的基础上再进一步虚拟出一套用户的操作系统（Guest Operation System，简称为Guest OS），供用户操作使用。为了方便阐述，在本文中，通过完全虚拟化技术实现的虚拟机简称为VM虚拟机。完全虚拟化技术的架构如图\ref{fig:full_virtualization}所示\citep{oludele2014evolution}。

\begin{figure}[!htbp]
    \centering
    \includegraphics[width=1.0\textwidth]{Full_Virtualization_Temp}
    \caption{完全虚拟化技术架构}
    \label{fig:full_virtualization}
\end{figure}

云计算行业内曾经非常流行的工具如VMware\citep{sahasrabudhe2014comparing,li2010selecting}、KVM\citep{liu2014research}、VirtualBox\citep{li2010selecting}等，都属于比较传统的完全虚拟化技术，这些完全虚拟化工具都拥有非常良好的对硬件资源的管理、隔离、虚拟、利用的功能。但是另一方面，完全虚拟化技术使用了虚拟机监控器VMM来虚拟硬件层，能够提供相对较完整独立、隔离性好的虚拟化环境，但是启动速度慢，需要消耗大量额外资源来维持虚拟化环境。

\subsection{操作系统级虚拟化技术}

操作系统级虚拟化技术（Operation System Virtualization Technology），是一种轻量级虚拟化技术\citep{morabito2017virtualization}。与传统的完全虚拟化技术相比，操作系统级虚拟化技术不需要对底层硬件进行虚拟化，而是直接在操作系统层上采用隔离的方法虚拟出与宿主机操作系统互相隔离的虚拟机。对此有一个生动形象的比喻，如果将物理实体宿主机比作一座房子，那么其底层硬件则是地基，操作系统是房子的支撑墙，系统中运行的应用则是房子内的具体房间。而传统的完全虚拟化技术可以比喻为在原有房子的地基之上另外实现一层新的地基（虚拟机监控器VMM），并在新地基上重新修建支撑墙（Guest OS）和房间（虚拟机）。相应地，操作系统级虚拟化技术则是直接借用了宿主机原有的地基（底层硬件）和支撑墙（操作系统），并在原来的房间里利用隔板隔离出来新的房间（虚拟机）。操作系统级虚拟化技术的架构如图\ref{fig:os_virtualization}所示\citep{xavier2013performance}。由于没有使用虚拟机监控器VMM来对硬件进行虚拟化，所以操作系统级虚拟化技术启动速度非常快，而且也不会消耗非常多的额外虚拟化开销，非常轻量级\citep{babu2014system}。

\begin{figure}[!htbp]
    \centering
    \includegraphics[width=1.0\textwidth]{OS_Virtualization_Temp}
    \caption{操作系统级虚拟化技术架构}
    \label{fig:os_virtualization}
\end{figure}

\subsection{容器虚拟化技术}

容器虚拟化技术（Container Virtualization Technology）属于操作系统级虚拟化技术的一种\citep{vaughan2006new}。容器虚拟化技术虚拟出来的“虚拟机”通常被称为容器（Container）。容器技术底层使用的是基于Linux内核的Linux Container（LXC）技术，而不需要进行额外的虚拟化操作\cite{celesti2016exploring}。LXC技术的核心技术包括Namespace技术和Cgroups技术。Namespace技术可以为容器提供一个独立的、隔离的命名空间，其中包含PID（进程）、UTS（host name）、MNT（文件）、NET（网络）、IPC（进程间交互）、USER（用户）等六个方面\cite{liu2014researchandimplementation}。不同命名空间的进程彼此之间看不到，Namespace单独隔离出来的命名空间中的容器与其宿主机之间也是彼此看不到，只能通过UTS将对方当作网络中的另一个主机节点，这样就保持了容器的独立性和隔离性。而通过Cgroups技术，可以对每个容器所拥有的CPU、内存、存储、输入输出等资源进行进程级别的管理和配置，这样就使得用户可以利用容器对终端资源进行按需分配管理。同时，利用Cgroups控制组，也能够对对容器内各种资源的消耗情况做监控。因为容器底层仍然是利用宿主机的操作系统，所以相比完全虚拟化技术，容器虚拟化技术基本没有太大的额外性能损耗，启动一个容器也相当于启动一个进程，启动时间基本为秒级时间。目前行业内最流行的基于容器虚拟化技术的产品是Docker\citep{bernstein2014containers,马晓光2017一种适用于}。本文中所涉及到的容器虚拟化技术均是使用Docker应用实现的。

% \subsection{容器集群技术}


% \section{自组织网络技术}
\section{计算迁移技术}
\subsection{计算迁移技术}

传统的终端设备的服务模式通常是终端设备在本地进行计算任务的运行，依靠终端设备自身的计算能力来保证服务质量。而随着边缘智能终端设备所要承担的计算任务越来越重，终端设备资源受限问题使得单一终端设备本地计算难以满足终端服务和任务对终端计算能力的要求，计算迁移技术逐渐成为了一个可行的解决方案\cite{张文丽2016智能移动终端计算迁移研究}。计算迁移技术（Computation Offloading），也被称为计算卸载技术，是指将终端设备上的计算任务，通过网络的形式发送到其他设备上进行计算，再将计算结果通过网络返回给终端设备。计算迁移技术的目的是扩展终端设备的计算能力，为用户提供质量更好的中断服务。

经过十几年的发展，计算迁移技术逐渐成为云计算和边缘计算中的一项重要技术\cite{崔勇2017移动云计算研究进展与趋势}。通常使用的方法是将边缘终端设备上的计算任务根据具体需求迁移一部分或迁移全部到云端计算资源上进行处理，利用一部分通信开销来置换一部分计算、存储等资源，为用户提供质量更好的服务\cite{徐乃凡2018面向边缘云高效能的移动终端计算迁移方法}。云端计算资源通常是部署在云数据中心的机房，可以提供计算、存储、网络等资源，这种计算模式又被称为Mobile Cloud Computing (MCC)\cite{barbarossa2014communicating}。但是终端设备与云数据中心之间会出现大量数据交互，产生大量网络延迟，并且可能会出现信息泄露等隐患，终端服务的实时性与安全性都不能得到保证\cite{shi2016edge}。

为了拉近云数据中心与用户终端之间的距离，云端计算资源也会部署在网络边缘，例如基站、边缘服务器等等。这种计算模式又被称为Mobile Edge Computing (MEC)\cite{董浩2019移动边缘计算环境下服务工作流的计算卸载}。与MCC类似，MEC也是一种集中式的云计算资源，需要资源服务器、中央管理器、移动网络等基础设施的支持，部署起来会比较复杂。目前对于MEC中计算迁移技术的的研究，主要集中在计算迁移决策、计算资源管理及移动性管理三个方面，而对与MEC系统中的计算迁移方案的设计与实现研究较少\cite{谢人超2018移动边缘计算卸载技术综述}。

文献\cite{satyanarayanan2009case}中介绍了一种计算迁移系统，利用部署在用户身边的可信的、能连接网络的、计算资源丰富的计算设备或计算机集群（被称为cloudlet）为移动用户提供服务。当用户在终端设备上产生服务请求时，终端设备可以在cloudlet上快速建立定制化的虚拟机，将计算任务迁移到对应虚拟机中并利用其资源来运行，用户可以利用轻量级客户端通过无线网络进行访问\cite{verbelen2012cloudlets}。cloudlet模式是一种粗粒度的计算迁移技术\cite{谢人超2018移动边缘计算卸载技术综述}。cloudlet的实现过程需要迁移整个VM Overlay，迁移时间较长，需要60-90s，当终端附近的cloudlet资源不足以支撑起计算迁移服务的时候，终端会向远程的云端资源请求协助\cite{张文丽2016智能移动终端计算迁移研究}。cloudlet计算迁移模式相比MCC和MEC，与用户之间的距离更近，传输时延更小，非常适合图书馆、咖啡厅、办公室等聚集场所。但cloudlet的缺点是需要在区域内单独进行部署，需要额外的硬件、场地、服务器等成本，使用范围有局限性\cite{li2014can,zhang2018hybrid}。另外，对于cloudlet的计算迁移技术的研究也还存在着缺乏统一的部署和管理方法的不足\cite{张文丽2016智能移动终端计算迁移研究}。
\subsection{基于Web的计算迁移技术}
Web Worker是一种基于HTML5的多线程方法，本文的研究对象就是面向Web Worker的计算迁移系统。基于Web Worker的服务系统可以拥有更好的跨平台性，应用开发者在开发服务应用的过程中可以不必考虑底层的系统架构\cite{王硕2016嵌入式}。基于Web Worker的计算迁移方法分为透明迁移和非透明迁移两类\cite{wang2018html5}。基于Web Worker的非透明迁移通常采用的方法是重写标准的Web Worker的接口API，并在编写Web应用的时候以新的库的形式导入修改，使得Web应用在运行的时候通过WebSocket通知运行在云端的服务端程序生成相应的Web Worker来进行计算\cite{hwang2014wwf,hwang2014cloud,gong2016wwof,kurumatani2012executing}。文献\cite{王昭2018Web}中提出了一种基于Web Worker的非透明迁移方法，通过重写Web应用的库，将终端上HTML的Web Worker迁移到其他服务器或其他终端设备上进行计算。文献\cite{zhang2010elastic}中提出了一种基于Web Worker的透明迁移方法，通过修改Web Worker运行环境代码来实现计算迁移的过程，但是没有做具体实现。

\section{任务调度算法}
\subsection{传统任务调度算法}

任务调度问题是一种在云计算\cite{qiao2016efficient}、边缘计算\cite{guo2017energy}、海服务\cite{王劲林2015一种现场}等领域常见的问题。在基于容器化的多终端协同服务技术种，不同的终端所能够提供的资源类型和大小不同，不同的任务对于不同类型资源的消耗情况也不一样，当然不同任务在不同节点上执行的费用和时间也不同。智能终端的资源是受限的，合理规划任务在节点上的执行调度，能够减少资源碎片，提高终端资源利用率\cite{huang2013energy,tseng2014effective,马晓光2017一种适用于}。任务调度问题是一种NP-hard问题\cite{tawfeek2013cloud}。任务调度问题可以划归为一类优化问题（Optimization Problem），有很多传统的基于贪心策略的任务调度优化算法\cite{乔楠楠2017一种面向网络边缘任务调度问题的多方向粒子群优化算法}。先进先出算法（FIFO Scheduler）是按照任务到达的先后顺序进行调度\cite{zaharia2009job}，Max-Min算法是优先调度执行时间最长的任务，Min-Min算法是优先调度执行时间最短的任务，\cite{tabak2014improving,杜玉霞2010Min}。这些基于贪心策略的任务调度算法的优点是原理比较简单，方便实施，运行速度快。但同样是因为这些算法的原理过于简单，优先满足局部最优选择，导致其缺点是很容易陷入局部最优解，得不到效果更好的解决方案。尤其是当任务规模扩大的时候，任务的维度也会增加，这会扩大搜索空间并使优化问题更加复杂，基于贪心策略的传统任务调度算法无法处理这种情况。

\subsection{元启发式算法}

近年来，很多元启发式算法（meta-heuristic algorithm）被应用于解决任务调度问题\cite{al2015cloudlet,刘运2015基于高斯变异的人工萤火虫算法在云计算资源调度中的研究}。Goldberg在1988年提出的遗传算法（Genetic Algorithm，GA）是一种非常著名的进化算法，它将自然选择理论引入到优化过程中，使用一条染色体来代表任务调度问题的一种调度方案，使用包括变异，交叉和选择在内的几个自然算子来作为演进迭代的计算法则\cite{fonseca1995overview,whitley1994genetic}。由于交叉和变异的操作，GA计算起来非常复杂，实现起来也比较困难。

一些元启发式算法的灵感来自昆虫，鱼类，鸟类和其他群体生物的自然行为。粒子群算法（Particle Swarm Optimization Algorithm，PSO）是Kennedy于1995年提出的经典元启发式算法，原理非常简单，容易实现，算法性能也非常好\cite{kennedy1995particle,liao2007discrete,krishnasamy2013task}。蚁群优化算法（Ant Colony Optimization Algorithm，ACO）的灵感来自蚂蚁在巢穴和食物来源之间搜索的自然觅食行为，蚁群优化算法利用化学信息素在蚁群搜索单位之间进行信息交流\cite{dorigo1997ant,dorigo1999ant,Hao2018Network}。人工鱼群算法通过模仿鱼类的随机游动的觅食行为来进行搜索\cite{桓自强2014aafsa}。

近年来，一些较新的元启发式算法也被提出，而且以这些元启发式算法为基础的改进并不多。2015年提出的蚁狮算法（Ant Lion Optimizer，ALO）的灵感来自于蚁群的狩猎行为\cite{mirjalili2015ant}。鲸鱼优化算法（Whale Optimization Algorithm，WOA）于2016年提出，该算法模拟鲸鱼的自然狩猎行为\cite{mirjalili2016whale}。2016年提出的蜻蜓算法（Dragonfly Algorithm，DA）基于自然界中蜻蜓群的静态和动态行为进行搜索\cite{mirjalili2016dragonfly}。2017年，Shahrzad Saremi和Seyedali Mirjalili提出了一种名为蝗虫优化算法（Grasshopper Optimization Algorithm，GOA）的新型元启发式优化算法。 蝗虫优化算法利用群体内相互作用力的影响和群体外的风力及食物来源修正的影响来模拟蝗虫群的迁移及觅食行为，以求寻找到目标食物\cite{saremi2017grasshopper}。蝗虫优化算法利用群体智慧，通过共享蝗虫群体的经验来确定搜索方向并找到最佳或近似最佳位置。蝗虫优化算法还使用演进的方法进行多次迭代，以使群体智慧更加有效。
% \section{预测算法}
